\section[Installation]{Installation}
\label{sec:installation}
\addcontentsline{toc}{section}{\thesection. Installation}

There are two ways to install \pkg{pbdZMQ} either with internal ZeroMQ library
(4.1.0 rc1) or with external ZeroMQ library (newer version).
The former way is tested under Linux, Mac OSX, and Windows systems, while
the later way is only tested under Linux system. Solaris has been tested
without any success in neither ways.

Install with internal ZeroMQ library: it can be simply done with
\begin{Command}
R CMD INSTALL pbdZMQ_0.1-0.tar.gz
\end{Command}

Example steps for installing with external ZeroMQ library:
\begin{itemize}
\item The minimum steps for installing \pkg{zeromq-4.1.2.tar.gz} is
\begin{Command}
./configure \
   --prefix=/usr/local/zmq \
   --enable-shared=yes \
   --with-poller=select \
   --without-documentation \
   --without-libsodium
make -j 4
make install
\end{Command}
which will install the library to \code{/usr/local/zmq/} where
\code{/usr/local/zmq/include/} will have the header file \code{zmq.h} and
\code{/usr/local/zmq/lib/} will have the shared library file \code{libzmq.so}.

\item Therefore, we can install \pkg{pbdZMQ} as next:
\begin{Command}
R CMD INSTALL pbdZMQ_0.1-0.tar.gz \
  --configure-vars="ZMQ_INCLUDE='-I/usr/local/zmq/include' \
                    ZMQ_LDFLAGS='-L/usr/local/zmq/lib -lzmq'"
\end{Command}

\end{itemize}

Suppose \pkg{pbdZMQ} is installed correctly. One may run the next from
{\em one} terminal to test the library.
\begin{Command}
Rscript -e "demo(hwserver,'pbdZMQ',ask=F,echo=F)" &
Rscript -e "demo(hwclient,'pbdZMQ',ask=F,echo=F)"
\end{Command}
This will run 5 iterations to send and receive 5 times of
'Hello World' messages between two instances (simple server and client).

Note that one may want to use different polling system provided by 
ZeroMQ library.
By default \code{select} method is used in \pkg{pbdZMQ} for Linux, Windows, and
Mac OSX. However, users may want to use \code{autodetect} or try others for
better polling. Currently, the options as given by ZeroMQ may be \code{kqueue},
\code{epoll}, \code{devpoll}, \code{poll}, or \code{select} depending on
libraries and system. The next may be used to change the polling method:
\begin{Command}
R CMD INSTALL pbdZMQ_0.1-0.tar.gz \
  --configure-vars="ZMQ_POLLER='autodetect'"
\end{Command}

